<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript">

      function updateDateAndTime() {

        var checkbox = document.getElementById("currentDateTimeCheckBox")
        
        if (checkbox.checked == true) {

        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!
        var yyyy = today.getFullYear();

        if(dd<10) {
            dd = '0' + dd
        } 

        if(mm<10) {
            mm = '0' + mm
        } 

        todayStr = yyyy + '-' + mm + '-' + dd;

        document.getElementById("event-date").value = todayStr;

        hh = today.getHours();
        mi = today.getMinutes();
        ss = today.getSeconds();

        if(hh<10) {
            hh = '0' + hh
        } 

        if(mi<10) {
            mi = '0' + mi
        } 

        if(ss<10) {
            ss = '0' + ss
        } 
        
        var timeNow = hh + ":" + mi + ":" + ss;

        document.getElementById("event-time").value = timeNow;

        }

        setTimeout(updateDateAndTime,1000);
      }

    </script>
    <title> {{ title }} </title>
    
    <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-utilities.min.css') }}">
  </head>
  <body onload="setTimeout(updateDateAndTime,1000);">
    <header>
      <h1 class="display-1">Baby Tracking</h1>

      {%  include "nav.html" %}

    </header>
    <main>
      <form method="POST">
      <h2>Today</h2>
      <div class="row justify-content-center mb-3">
        <div class="col">
          <div class="card my-2">
            <div class="card-header">
              <input type="submit" name="feeding" value="Feeding" class="btn btn-primary btn-lg mx-2">   
            </div>
            <div class="card-body">
              {% if day_counts.Feeding %}
                <button id="day-feed-count" type="button" class="btn btn-outline-primary fw-bold" data-bs-toggle="modal" data-bs-target="#day-feed-detail">
                  {{ day_counts.Feeding }}
                </button>
                <div class="modal" tabindex="-1" id="day-feed-detail">
                  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Feeding Events</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">

                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th scope="col">Date</th>
                              <th scope="col">Time</th>
                            </tr>
                          </thead>
                          <tbody class="table-group-divider">  
                             {% for day_event in day_event_details['Feeding'] %}
                              <tr>
                                <th scope="row">
                                  {{ day_event['event_date'] }}
                                </th>
                                <td>
                                  {{ day_event['event_time'] or " " }}
                                </td>
                              </tr>
                            {% endfor %}
                    
                          </tbody>
                        </table>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                      </div>
                    </div>
                  </div>
                </div>
              {% else %}           
                  None Yet
              {% endif %} 
              </div>
            </div>

            </div>
            
        <div class="col">
          <div class="card my-2">
            <div class="card-header"><input type="submit" name="wet-diaper" value="Wet Diaper" class="btn btn-success btn-lg mx-2"></div>
            <div class="card-body">
              {% if day_counts['Wet Diaper'] %}
                <button id="day-wet-diaper-count" type="button" class="btn btn-outline-success fw-bold" data-bs-toggle="modal" data-bs-target="#day-wet-diaper-detail">
                  {{ day_counts['Wet Diaper'] }}
                </button>
                <div class="modal" tabindex="-1" id="day-wet-diaper-detail">
                  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Wet Diaper Events</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">

                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th scope="col">Date</th>
                              <th scope="col">Time</th>
                            </tr>
                          </thead>
                          <tbody class="table-group-divider">  
                             {% for day_event in day_event_details['Wet Diaper'] %}
                              <tr>
                                <th scope="row">
                                  {{ day_event['event_date'] }}
                                </th>
                                <td>
                                  {{ day_event['event_time'] or " " }}
                                </td>
                              </tr>
                            {% endfor %}
                    
                          </tbody>
                        </table>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                      </div>
                    </div>
                  </div>
                </div>
              {% else %}           
                  None Yet
              {% endif %} 

              
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card my-2">
            <div class="card-header"><input type="submit" name="dirty-diaper" value="Dirty Diaper" class="btn btn-warning btn-lg mx-2"></div>
            <div class="card-body">
              {% if day_counts['Dirty Diaper'] %}
              <button id="day-dirty-diaper-count" type="button" class="btn btn-outline-warning fw-bold" data-bs-toggle="modal" data-bs-target="#day-dirty-diaper-detail">
                {{ day_counts['Dirty Diaper'] }}
              </button>
              <div class="modal" tabindex="-1" id="day-dirty-diaper-detail">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title">Dirty Diaper Events</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">

                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th scope="col">Date</th>
                            <th scope="col">Time</th>
                          </tr>
                        </thead>
                        <tbody class="table-group-divider">  
                           {% for day_event in day_event_details['Dirty Diaper'] %}
                            <tr>
                              <th scope="row">
                                {{ day_event['event_date'] }}
                              </th>
                              <td>
                                {{ day_event['event_time'] or " " }}
                              </td>
                            </tr>
                          {% endfor %}
                  
                        </tbody>
                      </table>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                    </div>
                  </div>
                </div>
              </div>
            {% else %}           
                None Yet
            {% endif %} 
              
            </div>
          </div>
        </div>
      </div>
      </div>
      </div>
      </div>
      </div>
      <div class="row mb-3">
        <div class="col">
        <div class="card">
          <div class="card-body">
          <div>
            <label for="duration-time" class="form-label">Duration (Feeding only)</label> 
            <input class="form-control-lg mx-2" style="width: 5rem; height: 2rem;" type="number" step="1" name="duration-time" id="duration-time" value="5"> 
          </div>
          <div>
            <div>
              <input class="form-check-input" type="checkbox" value="" id="currentDateTimeCheckBox" checked>
              <label class="form-check-label" for="currentDateTimeCheckBox">
                Current Date/Time
              </label>
            </div>
            <div>
              <label for="event-date" class="form-label my-2">Date</label> 
              <input class="form-control-lg my-2" type="date" name="event-date" id="event-date">
            </div>
            <div>
              <label for="event-time" class="form-label my-2">Time</label> 
              <input class="form-control-lg my-2" type="time" step="1" name="event-time" id="event-time">
            </div>
          </div>
        </div>
        </div>
      </div>
      </div>
    </form>  
  
   

    <h2>History</h2>

    <div class="row">
      <div class="col">
      <div class="card">
      <div class="card-body">
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">Date</th>
              <th scope="col">Feeding</th>
              <th scope="col">Wet Diaper</th>
              <th scope="col">Dirty Diaper</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">  
             {% for day_count in day_wise_counts %}
              <tr>
                <th scope="row">
                  {{ day_count['date'] }}
                </th>
                <td>
                  {{ day_count['Feeding'] or " " }}
                </td>
                <td>
                  {{ day_count['Wet Diaper'] or " "}}
                </td>
                <td>
                  {{ day_count['Dirty Diaper'] or " " }}
                </td>
              </tr>
            {% endfor %}
    
          </tbody>
        </table>

      </div>
      </div>
      </div>
      </div>

    </main>
      
    <footer>   
      
    </footer>
  </body>
</html>
